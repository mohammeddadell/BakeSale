{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { useEffect, useState } from 'react';\nimport ajax from \"./src/components/ajax\";\nimport DealList from \"./src/components/DealList\";\nimport DealDetail from \"./src/components/DealDetail\";\nimport SearchBar from \"./src/components/SearchBar\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function App() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      deals = _useState2[0],\n      setDeals = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      searchResults = _useState4[0],\n      setSearchResults = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currDealID = _useState6[0],\n      setCurrDealID = _useState6[1];\n\n  var dealsToDisplay = [];\n  useEffect(function () {\n    (function _callee() {\n      var dealsJson;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(ajax.fetchInitialDeals());\n\n            case 2:\n              dealsJson = _context.sent;\n\n              if (typeof dealsJson !== 'undefined') {\n                setDeals(dealsJson);\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n\n  var searchDeals = function _callee2(searchTerm) {\n    var dealsJson;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            dealsJson = [];\n\n            if (!searchTerm) {\n              _context2.next = 5;\n              break;\n            }\n\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(ajax.fetchDealSearchResults(searchTerm));\n\n          case 4:\n            dealsJson = _context2.sent;\n\n          case 5:\n            setSearchResults(dealsJson);\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var setCurrDeal = function setCurrDeal(dealID) {\n    setCurrDealID(dealID);\n  };\n\n  var currDeal = function currDeal() {\n    return deals.find(function (deal) {\n      return deal.key === currDealID;\n    });\n  };\n\n  var setDealsToDisplay = function setDealsToDisplay() {\n    console.log(deals);\n\n    if (searchResults.length > 0) {\n      dealsToDisplay = searchResults.slice();\n      return;\n    }\n\n    if (deals.length > 0) {\n      dealsToDisplay = deals.slice();\n      return;\n    }\n  };\n\n  return _jsxs(View, {\n    style: styles.mainView,\n    children: [setDealsToDisplay(), currDealID ? _jsx(View, {\n      style: styles.main,\n      children: _jsx(DealDetail, {\n        onBack: setCurrDeal,\n        initialDealData: currDeal()\n      })\n    }) : deals.length > 0 ? _jsxs(View, {\n      style: styles.main,\n      children: [_jsx(SearchBar, {\n        searchDeals: searchDeals\n      }), _jsx(DealList, {\n        deals: dealsToDisplay,\n        onItemPress: setCurrDeal\n      })]\n    }) : _jsx(View, {\n      style: styles.main,\n      children: _jsx(Text, {\n        style: styles.header,\n        children: \"No Available results\"\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  mainView: {\n    alignItems: 'center'\n  },\n  header: {\n    fontSize: 40\n  },\n  main: {\n    marginTop: 35\n  }\n});","map":{"version":3,"names":["useEffect","useState","ajax","DealList","DealDetail","SearchBar","App","deals","setDeals","searchResults","setSearchResults","currDealID","setCurrDealID","dealsToDisplay","fetchInitialDeals","dealsJson","searchDeals","searchTerm","fetchDealSearchResults","setCurrDeal","dealID","currDeal","find","deal","key","setDealsToDisplay","console","log","length","slice","styles","mainView","main","header","StyleSheet","create","container","flex","backgroundColor","alignItems","justifyContent","fontSize","marginTop"],"sources":["D:/React/Bakesale/App.js"],"sourcesContent":["import { StyleSheet, Text, View } from 'react-native';\nimport { useEffect, useState } from 'react';\nimport ajax from './src/components/ajax'\nimport DealList from './src/components/DealList';\nimport DealDetail from './src/components/DealDetail';\nimport SearchBar from './src/components/SearchBar';\n\nexport default function App() {\n  const [deals, setDeals] = useState([]);\n  const [searchResults, setSearchResults] = useState([]);\n  const [currDealID, setCurrDealID] = useState('');\n  let dealsToDisplay = [];\n   useEffect(()=> {\n    (async() => {\n      const dealsJson = await ajax.fetchInitialDeals();\n      if (typeof dealsJson !== 'undefined'){\n      setDeals(dealsJson);\n      }\n    })()\n  },[]);\n\n  const searchDeals = async (searchTerm) => {\n\n    let dealsJson = [];\n    if (searchTerm) {\n      dealsJson = await ajax.fetchDealSearchResults(searchTerm);\n\n    }\n      setSearchResults(dealsJson);\n  }\n  const setCurrDeal = (dealID) => {\n    setCurrDealID(dealID);\n  }\n\n  const currDeal = () => {\n    return deals.find((deal) => deal.key === currDealID);\n  }\n\n  const setDealsToDisplay = () => {\n    console.log(deals);\n    if (searchResults.length > 0 ) {\n      dealsToDisplay = searchResults.slice();\n      return;\n    }\n    if (deals.length > 0) {\n      dealsToDisplay = deals.slice();\n      return;\n    }\n  }\n  return (\n    <View style={styles.mainView}>\n      {\n        setDealsToDisplay()\n      }\n      {\n        currDealID ? <View style={styles.main}><DealDetail onBack={setCurrDeal} initialDealData={currDeal()}></DealDetail></View>\n        : (deals.length > 0 ? (<View style={styles.main}><SearchBar searchDeals={searchDeals}/><DealList deals={dealsToDisplay} onItemPress={setCurrDeal}></DealList></View>)\n        : <View style={styles.main}><Text style={styles.header}>No Available results</Text></View>)\n      }\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  mainView: {\n\n    alignItems: 'center',\n\n  },\n  header: {\n    fontSize: 40\n  },\n  main: {\n    marginTop: 35\n  }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}